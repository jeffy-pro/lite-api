version: '3'

vars:
  DOCKER_IMAGE: '{{.DOCKER_IMAGE | default "jeffymathew/lite-api"}}'
  TAG: '{{.TAG | default "v1.0.0"}}'

tasks:
  build:
    desc: Build Docker image
    cmds:
      - docker buildx build --platform linux/arm64/v8,linux/amd64 -t {{.DOCKER_IMAGE}}:{{.TAG}} -f build/package/Dockerfile .
  ci-build:
    desc: Build Docker image
    cmds:
      - docker build  -t {{.DOCKER_IMAGE}}:{{.TAG}} -f build/package/Dockerfile .